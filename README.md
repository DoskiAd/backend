# DoskiAD backend
Приложение - доска обьявлений.

`текущее api:`\
/doskiad/categories - получить список всех категорий объявлений \
/doskiad/items - получить список всех объявлений \
/doskiad/category/{ID} - получить список всех объявлений по номеру категории\
/doskiad/items/{ID} - страница товара\
/doskiad/items/{ID}/photo/{photoId} - получить фото товара, номера по порядку, начиная с 1го, кол-во фото, указано в информации о товаре

`запрос 2 и 3 поддерживают доп. параметры:`\
page - номер страницы, по умолчанию 1я\
size - кол-во элементов на страницу, по умолчанию 12\
title - поиск в заголовке (не зависит от регистра)\
p - параметр сортировки (по умолчанию date)\
d - сортировка (по умолчанию desc(по убыванию))\
min - минимальная цена (можно не указывать)\
max - максимальная цена (можно не указывать)

`варианты сортировки:`\
id - номер объявления\
date - дата\
title - заголовок\
price - цена\
location - локация

`направление сортировки:`\
desc - по убыванию\
asc - по возрастанию

`так же ответы на поисковые запросы содержат дополнительные заголовки:`\
totalFound - общее кол-во найденых объявлений\
totalPage - общее кол-во страниц с найдеными объявлениями

`пример поиска:`\
/doskiad/items?title=mac&p=price&d=asc - все маки начиная с самых дешевых\
/doskiad/category/4?p=price&d=asc - все товары из категори 4 (телефоны) начиная с самых дешевых

`регистрация пользователя:`\
POST запрос на /doskiad/register\
json формата:\
{\
  "name": "Пётр",\
  "email": "pochta@gmail.com",\
  "password": "12345678",\
  "confirmPassword": "12345678"\
}\
статус ответа - ок - успешно

`получения token'а (для добавления/обновления и тп.)`\
POST запрос на /doskiad/login\
json формата:\
{\
  "email": "pochta@gmail.com",\
  "password": "12345678"\
}\
ответ необходим для дальнейших операций, пример:\
{ "value": "07a98826-7f59-472a-8be0-a8a234fa87d0" }

`добавление объявления:`\
POST запрос на /doskiad/additem\
ОБЯЗАТЕЛНЫЙ ПАРАМЕТР: ?token=ТОКЕНАВТОРИЗАЦИИ\
пример: /doskiad/additem?token=07a98826-7f59-472a-8be0-a8a234fa87d0\
формат JSON:\
{\
"category": 7,\
"title": "тв philips 40 дюймов",\
"price": 20000,\
"description": "Большой телевизор с отличной картинкой.",\
"location": "Москва",\
"contacts": [\
  {\
"type": "number",\
"value": "79131112233"\
}, {\
  "type": "number",\
"value": "79991234567"\
}\
]\
}

`добавление фото:`\
POST запрос на /doskiad/addphoto/{id}\
ОБЯЗАТЕЛНЫЙ ПАРАМЕТР: ?token=ТОКЕНАВТОРИЗАЦИИ\
пример: /doskiad/addphoto/10?token=07a98826-7f59-472a-8be0-a8a234fa87d0\
где - 10 - номер объявления куда добавляем фото\
формат запроса:\
multipart/form-data\
параметр "files" с любым кол-вом jpg картинок весом до 0.5мб

`добавление/удаление избранное:`\
POST запрос на /doskiad/like/{id}\
ОБЯЗАТЕЛНЫЙ ПАРАМЕТР: ?token=ТОКЕНАВТОРИЗАЦИИ\
пример: /doskiad/like/10?token=07a98826-7f59-472a-8be0-a8a234fa87d0\
где - 10 - номер объявления которое добавляем в избранное\
**если такое объявление было уже в изранном - оно удаляется**\
в ответ придёт массив с номерами всех избранных объявлений

`список всех избранных объявлений:`\
POST запрос на /doskiad/like\
ОБЯЗАТЕЛНЫЙ ПАРАМЕТР: ?token=ТОКЕНАВТОРИЗАЦИИ\
пример: /doskiad/like?token=07a98826-7f59-472a-8be0-a8a234fa87d0\
в ответ придёт массив с номерами всех избранных объявлений

`страница избраных объявлений:`\
POST запрос на /doskiad/likes\
ОБЯЗАТЕЛНЫЙ ПАРАМЕТР: ?token=ТОКЕНАВТОРИЗАЦИИ\
пример: /doskiad/likes?token=07a98826-7f59-472a-8be0-a8a234fa87d0\
в ответ придёт страница с избранными объявлениями(аналогично/items)\
поддерживают доп. параметры:\
page - номер страницы, по умолчанию 1я\
size - кол-во элементов на страницу, по умолчанию 12\
p - параметр сортировки (по умолчанию date)\
d - сортировка (по умолчанию desc(по убыванию))

`временно отключенный функционал активации и смены пароля:`\
_потверждение аккаунта:_\
POST запрос на /doskiad/confirm\
ОБЯЗАТЕЛНЫЙ ПАРАМЕТР: ?token=ТОКЕН_ИЗ_ПИСЬМА(после регистрации, врменно отключено)\
пример: /doskiad/confirm?token=bd84e187-ef26-493b-b90d-9983d588b1df\
запрос смены пароля:\
POST запрос на /doskiad/forgot\
ОБЯЗАТЕЛНЫЙ ПАРАМЕТР: ?email=ПОЧТА\
отправлят ключ для смены пароля (временно отключено)\
смена пароля:\
POST запрос на /doskiad/reset\
ОБЯЗАТЕЛНЫЙ ПАРАМЕТРЫ:
token=ТОКЕН_ИЗ_ПИСЬМА(после пред. запроса, врменно отключено)\
и новый пароль в JSON: { "password":"qwerty123", "confirmPassword":"qwerty123" }
